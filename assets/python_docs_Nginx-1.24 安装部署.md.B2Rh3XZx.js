import{_ as a,c as i,o as n,ag as p}from"./chunks/framework.DWdSXOaE.js";const o=JSON.parse('{"title":"Nginx-1.24 安装部署","description":"","frontmatter":{},"headers":[],"relativePath":"python_docs/Nginx-1.24 安装部署.md","filePath":"python_docs/Nginx-1.24 安装部署.md"}'),l={name:"python_docs/Nginx-1.24 安装部署.md"};function e(t,s,h,c,k,r){return n(),i("div",null,[...s[0]||(s[0]=[p(`<h1 id="nginx-1-24-安装部署" tabindex="-1">Nginx-1.24 安装部署 <a class="header-anchor" href="#nginx-1-24-安装部署" aria-label="Permalink to &quot;Nginx-1.24 安装部署&quot;">​</a></h1><p>1、安装PCRE库</p><p><a href="https://mirrors.aliyun.com/exim/pcre/%E8%BD%BD%E6%9C%80%E6%96%B0%E7%9A%84" target="_blank" rel="noreferrer">https://mirrors.aliyun.com/exim/pcre/载最新的</a> PCRE 源码包，使用下面命令下载编译和安装 PCRE 包：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/src</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -zxvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pcre-8.34.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pcre-8.34</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./configure</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>2、安装zlib库</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/src</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://zlib.net/zlib-1.2.8.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -zxvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib-1.2.8.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib-1.2.8</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./configure</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>3、安装ssl（某些vps默认没装ssl)</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/src</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://www.openssl.org/source/openssl-1.0.1c.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -zxvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssl-1.0.1c.tar.gz</span></span></code></pre></div><p>4、安装Nginx</p><p>Nginx 一般有两个版本，分别是稳定版和开发版，您可以根据您的目的来选择这两个版本的其中一个，下面是把 Nginx 安装到 /usr/local/nginx 目录下的详细步骤：</p><div class="language-base vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">base</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd /usr/local/src</span></span>
<span class="line"><span>wget http://nginx.org/download/nginx-1.4.2.tar.gz</span></span>
<span class="line"><span>tar -zxvf nginx-1.4.2.tar.gz</span></span>
<span class="line"><span>cd nginx-1.4.2</span></span>
<span class="line"><span># 指定解压目录</span></span>
<span class="line"><span># tar -xzvf 文件名.tar.gz -C /目标/目录</span></span>
<span class="line"><span></span></span>
<span class="line"><span>./configure --sbin-path=/usr/local/nginx/nginx \\</span></span>
<span class="line"><span>--conf-path=/usr/local/nginx/nginx.conf \\</span></span>
<span class="line"><span>--pid-path=/usr/local/nginx/nginx.pid \\</span></span>
<span class="line"><span>--with-http_ssl_module \\</span></span>
<span class="line"><span>--with-pcre=/usr/local/src/pcre-8.34 \\</span></span>
<span class="line"><span>--with-zlib=/usr/local/src/zlib-1.3.1 \\</span></span>
<span class="line"><span>--with-openssl=/usr/local/src/openssl-1.0.1c</span></span>
<span class="line"><span></span></span>
<span class="line"><span>make</span></span>
<span class="line"><span>make install</span></span></code></pre></div><p>安装成功后 /usr/local/nginx 目录下如下</p><div class="language-tex vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tex</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fastcgi.conf            koi-win             nginx.conf.default</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fastcgi.conf.default    logs                scgi_params</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fastcgi_params          mime.types          scgi_params.default</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fastcgi_params.default  mime.types.default  uwsgi_params</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">html                    nginx               uwsgi_params.default</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">koi-utf                 nginx.conf          win-utf</span></span></code></pre></div><p>5、启动</p><p>确保系统的 80 端口没被其他程序占用，运行/usr/local/nginx/nginx 命令来启动 Nginx，</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ano</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 80</span></span></code></pre></div><p>如果查不到结果后执行以下命令，有结果则忽略此步骤（ubuntu下必须用sudo启动，不然只能在前台运行）</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/nginx/nginx</span></span></code></pre></div><p>打开浏览器访问此机器的 IP，如果浏览器出现 Welcome to nginx! 则表示 Nginx 已经安装并运行成功。</p><p><strong>附：可能遇到的错误和一些帮助信息</strong></p><p><strong>1.1编译pcre错误</strong></p><div class="language-tex vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tex</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">libtool: compile: unrecognized option \`-DHAVE_CONFIG_H&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">libtool: compile: Try \`libtool --help&#39; for more information.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">make[1]: *** [pcrecpp.lo] Error 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">make[1]: Leaving directory \`/usr/local/src/pcre-8.34&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">make: *** [all] Error 2</span></span></code></pre></div><p>解决办法：安装g++,别忘了重新configure</p><div class="language-tex vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tex</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">apt-get install g++</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">apt-get install build-essential</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">make clean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">./configure</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">make</span></span></code></pre></div><p><strong>1.2 make出错</strong></p><div class="language-tex vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tex</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">make: *** No rule to make target \`build&#39;, needed by \`default&#39;.  Stop.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">./configure: error: SSL modules require the OpenSSL library.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">You can either do not enable the modules, or install the OpenSSL library</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">into the system, or build the OpenSSL library statically from the source</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">with nginx by using --with-openssl=</span></span></code></pre></div>`,26)])])}const d=a(l,[["render",e]]);export{o as __pageData,d as default};
